# üöÄ Next.js –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### App Router (Next.js 13+)
- –ò—Å–ø–æ–ª—å–∑—É–π App Router –≤–º–µ—Å—Ç–æ Pages Router
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: `app/` ‚Üí `page.tsx`, `layout.tsx`, `loading.tsx`
- Server Components –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, Client Components —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ `layout.tsx` –∏–ª–∏ `page.tsx`

### Server vs Client Components
```typescript
// ‚úÖ Server Component (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
const ServerComponent = () => {
  return <div>–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç</div>
}

// ‚úÖ Client Component (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
'use client'
const ClientComponent = () => {
  const [state, setState] = useState()
  return <div>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç</div>
}
```

## üìà –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

### –ú–∞–ª—ã–π –ø—Ä–æ–µ–∫—Ç (–¥–æ 10k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å)
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è**: SSR –≤–µ–∑–¥–µ
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: Server Components –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ë–∞–∑–æ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Next.js

```typescript
// ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Server Components
const Page = () => (
  <div>
    <ServerHeader />
    <ServerProductList />
    <ServerChart />
  </div>
);
```

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–µ–∫—Ç (10k-100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å)
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è**: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: Server Components –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏, Client Components –¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∏
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: ISR, CDN, Redis

```typescript
// ‚úÖ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
const Page = () => (
  <div>
    <ServerHeader />
    <ClientChart /> {/* –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ */}
    <ServerProductList />
    <ClientPriceHistory /> {/* –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å */}
  </div>
);
```

### –ö—Ä—É–ø–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (100k+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å)
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è**: Client-side + –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: Client Components –¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∏, Server Components —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Edge Functions, CDN, Redis, Database Connection Pooling

```typescript
// ‚úÖ Client-side –¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∏
const Page = () => (
  <div>
    <ServerHeader /> {/* –°—Ç–∞—Ç–∏–∫–∞ */}
    <ClientDashboard /> {/* –î–∏–Ω–∞–º–∏–∫–∞ */}
    <ClientChart />
    <ClientProductList />
  </div>
);
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
```typescript
// ‚úÖ ISR –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
export const revalidate = 300; // 5 –º–∏–Ω—É—Ç

// ‚úÖ Streaming SSR
import { Suspense } from 'react';
const Page = () => (
  <Suspense fallback={<Skeleton />}>
    <HeavyComponent />
  </Suspense>
);

// ‚úÖ Edge Functions –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
export const runtime = 'edge';
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
```typescript
// ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
const isHighLoad = process.env.NODE_ENV === 'production' && 
                   parseInt(process.env.USER_COUNT || '0') > 100000;

// ‚úÖ –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
const ChartComponent = isHighLoad ? ClientChart : ServerChart;

// ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
const HeavyComponent = dynamic(() => import('./HeavyComponent'), {
  loading: () => <Skeleton />,
  ssr: !isHighLoad // –û—Ç–∫–ª—é—á–∞–µ–º SSR –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
});
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- **–î–æ 10k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: Vercel/Netlify
- **10k-100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: Vercel Pro + Redis
- **100k+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: AWS/GCP + CDN + Load Balancer

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
app/
‚îú‚îÄ‚îÄ layout.tsx              # –ö–æ—Ä–Ω–µ–≤–æ–π layout
‚îú‚îÄ‚îÄ page.tsx               # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ globals.css            # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ components/            # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ui/               # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (buttons, inputs)
‚îÇ   ‚îî‚îÄ‚îÄ features/         # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ hooks/                # –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏
‚îú‚îÄ‚îÄ lib/                  # –£—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ types/                # TypeScript —Ç–∏–ø—ã
‚îî‚îÄ‚îÄ [category]/           # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ä–æ—É—Ç—ã
    ‚îî‚îÄ‚îÄ page.tsx
```

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
const ProductCard = () => {}
const PriceChart = () => {}
const MarketStats = () => {}

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
const productCard = () => {}
const price_chart = () => {}
```

## üé® –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

### SCSS –ú–æ–¥—É–ª–∏
- –ò—Å–ø–æ–ª—å–∑—É–π SCSS –º–æ–¥—É–ª–∏ –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –°–æ–∑–¥–∞–≤–∞–π –æ—Ç–¥–µ–ª—å–Ω—ã–µ .module.scss —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–π CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–º–∏–∑–∞—Ü–∏–∏
- –ò–∑–±–µ–≥–∞–π inline —Å—Ç–∏–ª–µ–π

```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
import styles from './Component.module.scss'
<div className={styles.container}>

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
<div style={{ display: 'flex', padding: '16px' }}>
```

### –£—Å–ª–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã
```typescript
// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —É—Å–ª–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã
<div className={`${styles.base} ${isActive ? styles.active : styles.inactive}`}>

// ‚úÖ –ò–ª–∏ —Å –æ–±—ä–µ–∫—Ç–æ–º
<div className={styles[`variant_${variant}`]}>
```

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```typescript
// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π next/image
import Image from 'next/image'

<Image
  src="/product.jpg"
  alt="–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞"
  width={300}
  height={200}
  priority={true} // –¥–ª—è LCP –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
/>
```

### –§–æ–Ω—Ç—ã
```typescript
// ‚úÖ –í layout.tsx
import { Geist } from 'next/font/google'

const geist = Geist({ subsets: ['latin'] })

export default function RootLayout({ children }) {
  return (
    <html lang="ru" className={geist.className}>
      <body>{children}</body>
    </html>
  )
}
```

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
```typescript
// ‚úÖ –í page.tsx –∏–ª–∏ layout.tsx
export const metadata = {
  title: 'MarketVision - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ü–µ–Ω',
  description: '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ',
  openGraph: {
    title: 'MarketVision',
    description: '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ü–µ–Ω'
  }
}
```

## üìä –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

### Server Components
```typescript
// ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Server Component
async function ProductList() {
  const products = await fetchProducts()
  
  return (
    <div>
      {products.map(product => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  )
}
```

### Client Components
```typescript
// ‚úÖ –î–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
'use client'
import { useState, useEffect } from 'react'

const InteractiveChart = () => {
  const [data, setData] = useState([])
  
  useEffect(() => {
    fetchData().then(setData)
  }, [])
  
  return <Chart data={data} />
}
```

## üéØ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ MarketVision

### –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
```typescript
// ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
const PriceChart = ({ data }: { data: PriceData[] }) => {
  return (
    <div className="w-full h-64 bg-white rounded-lg p-4">
      <ECharts 
        option={chartOptions}
        style={{ height: '100%' }}
        opts={{ renderer: 'canvas' }}
      />
    </div>
  )
}
```

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–∞—à–±–æ—Ä–¥–æ–≤
```typescript
// ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  <ChartBlock />
  <StatsBlock />
  <DealsBlock />
</div>
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–º–æ—Ç—Ä–∏ –≤ `typescript-rules.mdc`

```typescript
// ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
import { z } from 'zod'

const ProductSchema = z.object({
  id: z.string(),
  name: z.string().min(1),
  price: z.number().positive()
})

// –í Server Component
const products = await fetchProducts()
const validatedProducts = products.map(p => ProductSchema.parse(p))
```

### API —Ä–æ—É—Ç—ã
```typescript
// ‚úÖ app/api/products/route.ts
import { NextRequest, NextResponse } from 'next/server'

export async function GET(request: NextRequest) {
  try {
    const products = await getProducts()
    return NextResponse.json(products)
  } catch (error) {
    return NextResponse.json(
      { error: '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö' },
      { status: 500 }
    )
  }
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```typescript
// ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
import { render, screen } from '@testing-library/react'
import ProductCard from './ProductCard'

test('–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞', () => {
  render(<ProductCard product={mockProduct} />)
  expect(screen.getByText(mockProduct.name)).toBeInTheDocument()
})
```

## üìù –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É–π `React.memo()` –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü—Ä–∏–º–µ–Ω—è–π `useMemo()` –∏ `useCallback()` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### SEO
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ HTML
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ h1-h6
- Meta —Ç–µ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON-LD)

### –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
```typescript
// ‚úÖ ARIA –∞—Ç—Ä–∏–±—É—Ç—ã
<button
  aria-label="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"
  onClick={handleFavorite}
  onKeyDown={handleKeyDown}
  tabIndex={0}
>
  ‚ù§Ô∏è
</button>
```

## üö® –ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å

- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π `getInitialProps` (—É—Å—Ç–∞—Ä–µ–ª–æ)
- ‚ùå –ù–µ –¥–µ–ª–∞–π –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Client Components
- ‚ùå –ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π inline —Å—Ç–∏–ª–∏
- ‚ùå –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π TailwindCSS (–ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SCSS –º–æ–¥—É–ª–∏)
description:
globs:
alwaysApply: false
---
