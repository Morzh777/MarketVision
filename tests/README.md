# üß™ –¢–µ—Å—Ç—ã –¥–ª—è Product Filter System

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ù–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ gRPC Product Filter Service –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å WB API.

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
cd tests
npm install
```

### 2. –ó–∞–ø—É—Å–∫ gRPC —Å–µ—Ä–≤–∏—Å–∞
```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
cd ../product-filter-service
npm run start:dev
```

### 3. –ó–∞–ø—É—Å–∫ WB API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
cd ../monorepo-root/wb-api
npm run start:dev
```

### 4. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### üß™ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
# –¢–µ—Å—Ç gRPC —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞–ø—Ä—è–º—É—é
npm run test:grpc

# –¢–µ—Å—Ç WB API —Å gRPC –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
npm run test:wb-api

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
npm run test:categories

# –í—Å–µ —Ç–µ—Å—Ç—ã —Å—Ä–∞–∑—É
npm run test:all

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm run test:full
```

#### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑
```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–º–æ–∫-–¥–∞–Ω–Ω—ã–µ)
npm run debug:failed-queries

# –ê–Ω–∞–ª–∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö WB API
npm run debug:real-wb-data

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
npm run analyze:optimize-queries

# –§–∏–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
npm run analyze:final-optimization

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤
npm run debug:all
```

## üîç –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### test-grpc-service.js
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è X3D –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ (—Ö vs x)
- ‚úÖ Strict model matching (7800 ‚â† 7600)
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### test-wb-api-grpc.js
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WB API —Å gRPC
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å legacy API
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ Fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### test-product-filter-integration.js
- ‚úÖ HTTP API –¥–ª—è –±–æ—Ç–∞
- ‚úÖ –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç WB API –∏ Ozon API
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∑–∞–ø—Ä–æ—Å–∞–º
- ‚úÖ –í—ã–±–æ—Ä —Å–∞–º–æ–≥–æ –¥–µ—à–µ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–Ω
- ‚úÖ Health check –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

**Endpoints:**
- `POST /products/search` - –ø–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- `GET /products/health` - —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
- `POST /products/cache/clear/:category` - –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
- `GET /products/cache/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£—Å–ø–µ—à–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:
```
üîç –¢–µ—Å—Ç–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å: "7800x3d"
‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è "7800x3d":
   –í—Ö–æ–¥–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤: 3
   –ü—Ä–æ—à–ª–∏ —Ñ–∏–ª—å—Ç—Ä: 1
   –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: 15–º—Å
   1. AMD Ryzen 7 7800X3D BOX ‚úÖ
```

### –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã:
```
‚ùå Ryzen5 7600X3D BOX –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –ë–ª–∏–∑–∫–æ –∫ 7800X3D
   –ü—Ä–∏—á–∏–Ω–∞: –ú–æ–¥–µ–ª—å –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç. –ó–∞–ø—Ä–æ—Å: 7800, –ü—Ä–æ–¥—É–∫—Ç: 7600
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### gRPC —Å–µ—Ä–≤–∏—Å –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
cd ../product-filter-service
npm run start:dev
```

### Redis –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Redis
docker run -d -p 6379:6379 redis:7-alpine
```

### WB API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ WB API
cd ../monorepo-root/wb-api
npm run start:dev
``` 